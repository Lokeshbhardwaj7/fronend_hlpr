"use strict";(self.webpackChunkmetrics=self.webpackChunkmetrics||[]).push([[335,361],{4029:function(e,r,a){a.d(r,{JH:function(){return f},Tj:function(){return x},U6:function(){return v},f8:function(){return h},h4:function(){return p},kB:function(){return m}});var t=a(80827),i=a(3509),l=a(40789),n=a(34248),s=a(98189),o=a(5140),d=a(42807),c=a(31596),u=a(69993);const m=(0,t.hg)("getAdminUserList",(async(e,r)=>{let{dispatch:a}=r;try{a((0,i.K4)(!0));const e=await(0,o.Z)().get("/admin/list");var t,d,c,u;if(a((0,i.K4)(!1)),null!==e&&void 0!==e&&e.data)a((0,n.w)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data));else a((0,l.tK)((null===(d=error)||void 0===d||null===(c=d.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message)||s.Z.ERROR.DEFAULT))}catch(error){var m,v;a((0,i.K4)(!1)),a((0,l.tK)((null===error||void 0===error||null===(m=error.response)||void 0===m||null===(v=m.data)||void 0===v?void 0:v.message)||s.Z.ERROR.DEFAULT))}})),v=(0,t.hg)("updateAdminUserData",(async(e,r)=>{let{dispatch:a}=r;try{a((0,i.K4)(!0));const r=await(0,o.Z)().put(`/admin/edit/${e.admin_user_id}`,e.data);var t;if(a((0,i.K4)(!1)),null!==r&&void 0!==r&&r.data)a((0,l.$h)(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)),a(m()),e.callbackFunc();else a((0,l.tK)(s.Z.ERROR.DEFAULT))}catch(error){var n,d;a((0,i.K4)(!1)),a((0,l.tK)((null===error||void 0===error||null===(n=error.response)||void 0===n||null===(d=n.data)||void 0===d?void 0:d.message)||s.Z.ERROR.DEFAULT))}})),h=(0,t.hg)("accountSettingsUpdate",(async(e,r)=>{let{dispatch:a}=r;try{a((0,i.K4)(!0));const r=await(0,o.Z)().put(1===e.user_type?`admin/edit/${e.id}`:`/users/update/${e.id}`,e);if(a((0,i.K4)(!1)),null!==r&&void 0!==r&&r.data){var t;const e=JSON.parse(localStorage.getItem("user_data"));Object.keys(null===r||void 0===r?void 0:r.data).forEach((a=>{e[a]=null===r||void 0===r?void 0:r.data[a]})),localStorage.setItem("user_data",JSON.stringify(e)),a((0,l.$h)(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message))}else a((0,l.tK)(s.Z.ERROR.DEFAULT))}catch(error){var n,d;a((0,i.K4)(!1)),a((0,l.tK)((null===error||void 0===error||null===(n=error.response)||void 0===n||null===(d=n.data)||void 0===d?void 0:d.message)||s.Z.ERROR.DEFAULT))}})),f=(0,t.hg)("accountPasswordChange",(async(e,r)=>{let{dispatch:a}=r;try{a((0,c.O)(!0));const r=await(0,o.Z)().put(`users/change-password/${null===e||void 0===e?void 0:e.id}`,e);if(a((0,c.O)(!1)),null!==r&&void 0!==r&&r.data){var t;const e=JSON.parse(localStorage.getItem("user_data"));Object.keys(null===r||void 0===r?void 0:r.data).forEach((a=>{e[a]=null===r||void 0===r?void 0:r.data[a]})),a((0,l.$h)(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message))}else a((0,l.tK)(s.Z.ERROR.DEFAULT))}catch(error){var i,n;a((0,c.O)(!1)),a((0,l.tK)((null===error||void 0===error||null===(i=error.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)||s.Z.ERROR.DEFAULT))}})),p=((0,t.hg)("accountClientDetails",(async(e,r)=>{let{dispatch:a}=r;try{a((0,u.P)(!0));const r=await(0,o.Z)().post("users/check-wallmart-token",e);if(a((0,u.P)(!1)),null!==r&&void 0!==r&&r.data){let r={id:e.id};a((0,d.M_)(r)),a((0,l.$h)(s.Z.SUCCESS.SELLERCONNECTED))}else a((0,l.tK)(s.Z.ERROR.DEFAULT))}catch(error){a((0,u.P)(!1)),a((0,l.tK)(s.Z.ERROR.SELLERCONNECTEDFAIL))}})),(0,t.hg)("createAdminUserData",(async(e,r)=>{let{dispatch:a}=r;try{a((0,i.K4)(!0));const r=await(0,o.Z)().post("/users/create",e.data);a((0,i.K4)(!1)),null!==r&&void 0!==r&&r.data?(a((0,l.$h)("User created successfully")),a(m()),e.callbackFunc()):a((0,l.tK)(s.Z.ERROR.DEFAULT))}catch(error){var t,n;a((0,i.K4)(!1)),a((0,l.tK)((null===error||void 0===error||null===(t=error.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||s.Z.ERROR.DEFAULT))}}))),x=(0,t.hg)("deleteAdminUserData",(async(e,r)=>{let{dispatch:a}=r;try{a((0,i.K4)(!0));const r=await(0,o.Z)().delete(`/admin/delete/${e.admin_user_id}`);var t,n;if(a((0,i.K4)(!1)),null!==r&&void 0!==r&&r.data)a((0,l.$h)(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)),a(m()),e.callbackFunc();else a((0,l.tK)((null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||s.Z.ERROR.DEFAULT))}catch(error){var d,c;a((0,i.K4)(!1)),a((0,l.tK)((null===error||void 0===error||null===(d=error.response)||void 0===d||null===(c=d.data)||void 0===c?void 0:c.message)||s.Z.ERROR.DEFAULT))}}))},4071:function(e,r,a){a.d(r,{Z:function(){return m}});a(47313);var t=a(71003),i=a(94469),l=a(6961),n=a(69625),s=a(72461),o=a(33604),d=a(98668),c=a(48420),u=a(46417);function m(e){const{open:r,cancelCallback:a,deleteCallback:m,item:v}=e,h=(0,c.CG)((e=>e.dataLoading));return(0,u.jsx)("div",{children:(0,u.jsxs)(i.Z,{open:r,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,u.jsx)(o.Z,{id:"alert-dialog-title",children:"Delete Confirmation"}),(0,u.jsx)(n.Z,{children:(0,u.jsx)(s.Z,{id:"alert-dialog-description",children:`Are you sure want to delete this ${v||"item"}?`})}),(0,u.jsxs)(l.Z,{children:[(0,u.jsx)(t.Z,{onClick:a,children:"Cancel"}),(0,u.jsxs)(t.Z,{onClick:m,autoFocus:!0,sx:{color:"red"},disabled:h.loading,children:[h.loading&&(0,u.jsx)(d.Z,{sx:{color:"#0000001f",mr:"10px"},size:"10px"}),"Delete"]})]})]})})}},70872:function(e,r,a){var t=a(75627),i=a(8047),l=a(1082),n=a(47313),s=a(89332),o=a(22611),d=a(46417);const c=n.forwardRef((e=>{const{control:r,rules:a,disabled:c,name:u,errors:m,label:v,fullWidth:h,helperText:f}=e,[p,x]=(0,n.useState)(!1),Z=e=>{" "===e.key&&e.preventDefault()};return(0,d.jsx)(t.Qr,{name:u,control:r,rules:{...a,minLength:5,pattern:{value:/^(\S+$)/,message:"invalid email address"}},render:e=>{let{field:r}=e;return(0,d.jsx)(i.Z,{...r,type:p?"text":"password",onKeyPress:Z,fullWidth:h,label:v,disabled:c,error:m[u],helperText:m[u]&&"required"===m[u].type?`Please add valid ${v}`:f,InputProps:{endAdornment:(0,d.jsx)(l.Z,{position:"start",sx:{cursor:"pointer"},children:p?(0,d.jsx)(o.Z,{onClick:()=>x(!p)}):(0,d.jsx)(s.Z,{onClick:()=>x(!p)})})}})}})}));r.Z=c},83247:function(e,r,a){a.d(r,{Z:function(){return m}});var t=a(75627),i=a(47313),l=a(36672),n=a(57204),s=a(47992),o=a(49914),d=a(20715),c=a(46417);const u=i.forwardRef((function(e,r){const{onChange:a,...t}=e;return(0,c.jsx)(l.oc,{...t,mask:"(#00) 000-0000",definitions:{"#":/[1-9]/},inputRef:r,onAccept:r=>a({target:{name:e.name,value:r}}),overwrite:!0})}));function m(e){const{control:r,rules:a,disabled:i,name:l,errors:m,label:v,fullWidth:h,type:f,helperText:p}=e;return(0,c.jsx)(t.Qr,{name:l,control:r,rules:{...a,minLength:14},render:e=>{let{field:r}=e;return(0,c.jsxs)(n.Z,{variant:"standard",fullWidth:h,children:[(0,c.jsx)(s.Z,{error:m[l],sx:{zIndex:"99",left:"14px",top:"-6px"},children:v}),(0,c.jsx)(o.Z,{...r,type:f,label:v,disabled:i,error:m[l],inputComponent:u}),(0,c.jsx)(d.Z,{sx:{color:"red",ml:"10px"},children:m&&m[l]&&"required"===m[l].type?`Please select valid ${v}`:p})]})}})}},93491:function(e,r,a){var t=a(75627),i=a(69173),l=a(67426),n=a(46417);r.Z=e=>{const{control:r,rules:a,disabled:s,name:o,errors:d,label:c,defaultValue:u,isChecked:m}=e;return(0,n.jsx)(t.Qr,{name:o,control:r,rules:a,defaultValue:u,render:e=>{let{field:r}=e;return(0,n.jsx)(i.Z,{control:(0,n.jsx)(l.Z,{...r,disabled:s,error:d[o],defaultChecked:m}),label:c})}})}},48491:function(e,r,a){var t=a(75627),i=a(8047),l=a(46417);r.Z=e=>{const{control:r,rules:a,disabled:n,name:s,errors:o,label:d,fullWidth:c,type:u,helperText:m}=e;return(0,l.jsx)(t.Qr,{name:s,control:r,rules:{...a,pattern:{value:/^(\S+$)/,message:"invalid email address"}},render:e=>{let{field:r}=e;return(0,l.jsx)(i.Z,{type:u,...r,fullWidth:c,label:d,disabled:n,error:o[s],helperText:o&&o[s]&&"required"===o[s].type?`Please add valid ${d}`:m})}})}},66335:function(e,r,a){a.r(r),a.d(r,{default:function(){return K}});var t=a(47313),i=a(7794),l=a(67426),n=a(80836),s=a(71003),o=a(51997),d=a(65954),c=a(33497),u=a(4029),m=a(48420),v=a(50301),h=a(94469),f=a(33604),p=a(69625),x=a(19641),Z=a(6961),b=a(98668),j=a(3463),g=a(75627),y=a(62563),R=a(93491),_=a(48491),E=a(83247),C=a(70872),k=a(46417);const w=t.forwardRef((function(e,r){return(0,k.jsx)(v.Z,{direction:"up",ref:r,...e})}));var U=e=>{var r,a,t,i;const{open:l,handleClose:n,updateAdminUser:o,adminUserData:d}=e,c=(0,m.CG)((e=>e.dataLoading)),u=j.Ry().shape({first_name:j.Z_().matches(/^[^\d]+$/,"Numbers are not allowed").required("First name is required").trim(),last_name:j.Z_().matches(/^[^\d]+$/,"Numbers are not allowed").required("Last name is required").trim(),email:j.Z_().email("Must be a valid email").required("Email is required").trim(),phone:j.Z_().required("Please enter phone number"),password:null!==d&&void 0!==d&&d.id?j.Z_().nullable().trim():j.Z_().required("Password is required").trim()}),{register:v,handleSubmit:U,control:A,formState:{errors:K}}=(0,g.cI)({defaultValues:d.id?d:{},mode:"onTouched",resolver:(0,y.X)(u)});return(0,k.jsxs)(h.Z,{open:l,TransitionComponent:w,keepMounted:!0,onClose:n,"aria-describedby":"alert-dialog-slide-description",children:[(0,k.jsxs)(f.Z,{children:[d.id?"Edit":"Add"," Admin User information"]}),(0,k.jsxs)("form",{onSubmit:U((e=>{o(e)})),children:[(0,k.jsx)(p.Z,{children:(0,k.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,k.jsx)(x.ZP,{item:!0,sm:6,children:(0,k.jsx)(_.Z,{label:"First Name",control:A,rules:{required:!0},disabled:!1,name:"first_name",helperText:null===(r=K.first_name)||void 0===r?void 0:r.message,errors:K,fullWidth:!0,...v("first_name")})}),(0,k.jsx)(x.ZP,{item:!0,sm:6,children:(0,k.jsx)(_.Z,{label:"Last Name",control:A,rules:{required:!0},disabled:!1,name:"last_name",helperText:null===(a=K.last_name)||void 0===a?void 0:a.message,errors:K,fullWidth:!0,...v("last_name")})}),(0,k.jsx)(x.ZP,{item:!0,sm:6,children:(0,k.jsx)(_.Z,{label:"Email",control:A,rules:{required:!0},disabled:!!d.id,helperText:null===(t=K.email)||void 0===t?void 0:t.message,name:"email",errors:K,fullWidth:!0,...v("email")})}),(0,k.jsx)(x.ZP,{item:!0,sm:6,children:(0,k.jsx)(E.Z,{label:"Phone no.",control:A,rules:{required:!0},disabled:!!d.id,name:"phone",helperText:null===(i=K.phone)||void 0===i?void 0:i.message,errors:K,fullWidth:!0})}),!d.id&&(0,k.jsx)(x.ZP,{item:!0,sm:6,children:(0,k.jsx)(C.Z,{label:"Password",control:A,rules:{required:!0},disabled:!!d.id,name:"password",errors:K,fullWidth:!0,...v("password")})}),(0,k.jsx)(x.ZP,{item:!0,sm:6,children:(0,k.jsx)(R.Z,{label:"Active",control:A,disabled:!1,name:"is_active",errors:K,fullWidth:!0,isChecked:!d.id||d.is_active,defaultValue:!0})})]})}),(0,k.jsxs)(Z.Z,{children:[(0,k.jsx)(s.Z,{onClick:n,children:"Cancel"}),(0,k.jsxs)(s.Z,{type:"submit",variant:"contained",disabled:c.loading,children:[c.loading&&(0,k.jsx)(b.Z,{sx:{color:"#0000001f",mr:"10px"},size:"15px"}),d.id?"Update":"Create"]})]})]})]})},A=a(4071);var K=()=>{const[e,r]=(0,t.useState)([]),[a,v]=(0,t.useState)(!1),[h,f]=(0,t.useState)({}),[p,x]=(0,t.useState)(!1),[Z,b]=(0,t.useState)({}),j=(0,m.CG)((e=>e.adminUserSlice.list)),g=(0,m.TL)();(0,t.useEffect)((()=>{g((0,u.kB)())}),[]),(0,t.useEffect)((()=>{j&&j.length>0?r(j.map((e=>[e.email,e.first_name,e.last_name,e.is_active,e.user_type,e]))):r([])}),[j]);const y=e=>{v(!a),f(e||{})},R=e=>{x(!p),b(e||{})},_=[{name:"email",label:"Email",options:{filter:!0,sort:!0}},{name:"first_name",label:"First Name",options:{filter:!0,sort:!1}},{name:"last_name",label:"Last name",options:{filter:!0,sort:!1}},{name:"is_active",label:"Active",options:{filter:!0,sort:!1,customBodyRender:e=>(0,k.jsx)(l.Z,{checked:e})}},{name:"user_type",label:"Type",options:{filter:!0,sort:!1,customBodyRender:e=>2==e?"Seller Admin":"Admin"}},{name:"actions",label:"Actions",options:{filter:!0,sort:!1,customBodyRender:e=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(n.Z,{onClick:()=>y(e),children:(0,k.jsx)(d.Z,{color:"primary"})}),(0,k.jsx)(n.Z,{onClick:()=>R(e),children:(0,k.jsx)(o.default,{color:"error"})})]})}}],E={selectableRows:"none",print:!1,download:!1,customToolbar:()=>(0,k.jsx)(s.Z,{onClick:y,children:"Add New"})};return(0,k.jsxs)(c.Z,{title:"Admin Users List",children:[(0,k.jsx)(i.ZP,{data:e,columns:_,options:E}),a&&(0,k.jsx)(U,{open:a,handleClose:y,updateAdminUser:e=>{e.id?g((0,u.U6)({data:{first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,is_active:e.is_active,user_type:1,store_name:e.store_name,password:null===e||void 0===e?void 0:e.password},admin_user_id:e.id,callbackFunc:y})):g((0,u.h4)({data:{first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,is_active:e.is_active,user_type:1,store_name:e.store_name,password:null===e||void 0===e?void 0:e.password},callbackFunc:y}))},adminUserData:h}),p&&(0,k.jsx)(A.Z,{item:"admin",cancelCallback:R,deleteCallback:()=>{null!==Z&&void 0!==Z&&Z.id&&g((0,u.Tj)({admin_user_id:Z.id,callbackFunc:R}))},open:p})]})}},65954:function(e,r,a){var t=a(64836);r.Z=void 0;var i=t(a(45045)),l=a(46417),n=(0,i.default)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");r.Z=n},89332:function(e,r,a){var t=a(64836);r.Z=void 0;var i=t(a(45045)),l=a(46417),n=(0,i.default)((0,l.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye");r.Z=n},22611:function(e,r,a){var t=a(64836);r.Z=void 0;var i=t(a(45045)),l=a(46417),n=(0,i.default)((0,l.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");r.Z=n},62563:function(e,r,a){a.d(r,{X:function(){return s}});var t=a(75627),i=function(e,r,a){if(e&&"reportValidity"in e){var i=(0,t.U2)(a,r);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},l=function(e,r){var a=function(a){var t=r.fields[a];t&&t.ref&&"reportValidity"in t.ref?i(t.ref,a,e):t.refs&&t.refs.forEach((function(r){return i(r,a,e)}))};for(var t in r.fields)a(t)},n=function(e,r){r.shouldUseNativeValidation&&l(e,r);var a={};for(var i in e){var n=(0,t.U2)(r.fields,i);(0,t.t8)(a,i,Object.assign(e[i]||{},{ref:n&&n.ref}))}return a},s=function(e,r,a){return void 0===r&&(r={}),void 0===a&&(a={}),function(s,o,d){try{return Promise.resolve(function(t,n){try{var c=(r.context,Promise.resolve(e["sync"===a.mode?"validateSync":"validate"](s,Object.assign({abortEarly:!1},r,{context:o}))).then((function(e){return d.shouldUseNativeValidation&&l({},d),{values:a.raw?s:e,errors:{}}})))}catch(i){return n(i)}return c&&c.then?c.then(void 0,n):c}(0,(function(e){if(!e.inner)throw e;return{values:{},errors:n((r=e,a=!d.shouldUseNativeValidation&&"all"===d.criteriaMode,(r.inner||[]).reduce((function(e,r){if(e[r.path]||(e[r.path]={message:r.message,type:r.type}),a){var i=e[r.path].types,l=i&&i[r.type];e[r.path]=(0,t.KN)(r.path,a,e,r.type,l?[].concat(l,r.message):r.message)}return e}),{})),d)};var r,a})))}catch(i){return Promise.reject(i)}}}}}]);