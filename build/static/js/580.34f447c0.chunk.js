"use strict";(self.webpackChunkmetrics=self.webpackChunkmetrics||[]).push([[580],{20710:function(e,l,a){a.d(l,{$5:function(){return o},Nn:function(){return u},WY:function(){return v},fZ:function(){return c}});var t=a(80827),s=a(3509),i=a(40789),r=a(54886),n=a(98189),d=a(5140);const o=(0,t.hg)("getSellerList",(async(e,l)=>{let{dispatch:a}=l;try{a((0,s.K4)(!0));const e=await(0,d.Z)().get("/users");a((0,s.K4)(!1)),null!==e&&void 0!==e&&e.data?a((0,r.Zx)(null===e||void 0===e?void 0:e.data)):a((0,i.tK)(n.Z.ERROR.DEFAULT))}catch(t){a((0,s.K4)(!1)),a((0,i.tK)(n.Z.ERROR.DEFAULT))}})),u=(0,t.hg)("updateSellerData",(async(e,l)=>{let{dispatch:a}=l;try{a((0,s.K4)(!0));const l=await(0,d.Z)().put(`/users/update/${e.seller_id}`,e.data);var t;if(a((0,s.K4)(!1)),null!==l&&void 0!==l&&l.data)a((0,i.$h)(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message)),a(o()),e.callbackFunc();else a((0,i.tK)(n.Z.ERROR.DEFAULT))}catch(c){var r,u;a((0,s.K4)(!1)),a((0,i.tK)((null===c||void 0===c||null===(r=c.response)||void 0===r||null===(u=r.data)||void 0===u?void 0:u.message)||n.Z.ERROR.DEFAULT))}})),c=(0,t.hg)("createSellerData",(async(e,l)=>{let{dispatch:a}=l;try{a((0,s.K4)(!0));const l=await(0,d.Z)().post("/users/create",e.data);a((0,s.K4)(!1)),null!==l&&void 0!==l&&l.data?(a((0,i.$h)("Seller created successfully")),a(o()),e.callbackFunc()):a((0,i.tK)(n.Z.ERROR.DEFAULT))}catch(u){var t,r;a((0,s.K4)(!1)),a((0,i.tK)((null===u||void 0===u||null===(t=u.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||n.Z.ERROR.DEFAULT))}})),v=(0,t.hg)("deleteSellerData",(async(e,l)=>{let{dispatch:a}=l;try{a((0,s.K4)(!0));const l=await(0,d.Z)().delete(`/users/delete/${e.seller_id}`);var t,r;if(null!==l&&void 0!==l&&l.data)e.callbackFunc(),a(o()),a((0,s.K4)(!1)),a((0,i.$h)(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message));else a((0,i.tK)((null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.message)||n.Z.ERROR.DEFAULT))}catch(v){var u,c;a((0,s.K4)(!1)),a((0,i.tK)((null===v||void 0===v||null===(u=v.response)||void 0===u||null===(c=u.data)||void 0===c?void 0:c.message)||n.Z.ERROR.DEFAULT))}}))},83247:function(e,l,a){a.d(l,{Z:function(){return v}});var t=a(75627),s=a(47313),i=a(36672),r=a(57204),n=a(47992),d=a(49914),o=a(20715),u=a(46417);const c=s.forwardRef((function(e,l){const{onChange:a,...t}=e;return(0,u.jsx)(i.oc,{...t,mask:"(#00) 000-0000",definitions:{"#":/[1-9]/},inputRef:l,onAccept:l=>a({target:{name:e.name,value:l}}),overwrite:!0})}));function v(e){const{control:l,rules:a,disabled:s,name:i,errors:v,label:m,fullWidth:p,type:h,helperText:f}=e;return(0,u.jsx)(t.Qr,{name:i,control:l,rules:{...a,minLength:14},render:e=>{let{field:l}=e;return(0,u.jsxs)(r.Z,{variant:"standard",fullWidth:p,children:[(0,u.jsx)(n.Z,{error:v[i],sx:{zIndex:"99",left:"14px",top:"-6px"},children:m}),(0,u.jsx)(d.Z,{...l,type:h,label:m,disabled:s,error:v[i],inputComponent:c}),(0,u.jsx)(o.Z,{sx:{color:"red",ml:"10px"},children:v&&v[i]&&"required"===v[i].type?`Please select valid ${m}`:f})]})}})}},39580:function(e,l,a){a.r(l),a.d(l,{default:function(){return B}});var t=a(47313),s=a(67426),i=a(80836),r=a(71003),n=a(48182),d=a(8047),o=a(51997),u=a(65954),c=a(7794),v=a(80827),m=a(3509),p=a(40789),h=a(98189),f=a(5140),x=a(12749);const Z=(0,v.hg)("getSellerUserList",(async(e,l)=>{let{dispatch:a}=l;try{a((0,m.K4)(!0));const l=await(0,f.Z)().get(`users/seller/user-list/${null===e||void 0===e?void 0:e.id}`);var t;if(a((0,m.K4)(!1)),null!==l&&void 0!==l&&l.data)a((0,x.d)(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.data));else a((0,p.tK)(h.Z.ERROR.DEFAULT))}catch(s){a((0,m.K4)(!1)),a((0,p.tK)(h.Z.ERROR.DEFAULT))}})),_=(0,v.hg)("createSellerUserData",(async(e,l)=>{let{dispatch:a}=l;try{a((0,m.K4)(!0));const l=await(0,f.Z)().post("/users/seller/create",e.data);a((0,m.K4)(!1)),null!==l&&void 0!==l&&l.data?(a((0,p.$h)("User created successfully")),a(Z({id:e.data.seller_id})),e.callbackFunc()):a((0,p.tK)(h.Z.ERROR.DEFAULT))}catch(i){var t,s;a((0,m.K4)(!1)),a((0,p.tK)((null===i||void 0===i||null===(t=i.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||h.Z.ERROR.DEFAULT))}})),R=(0,v.hg)("updateSellerUser",(async(e,l)=>{let{dispatch:a}=l;try{a((0,m.K4)(!0));const l=await(0,f.Z)().put(`/users/seller/update/${e.seller_id}`,e.data);var t;if(a((0,m.K4)(!1)),null!==l&&void 0!==l&&l.data)a((0,p.$h)(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message)),a(Z({id:e.data.seller_id})),e.callbackFunc();else a((0,p.tK)(h.Z.ERROR.DEFAULT))}catch(r){var s,i;a((0,m.K4)(!1)),a((0,p.tK)((null===r||void 0===r||null===(s=r.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)||h.Z.ERROR.DEFAULT))}})),b=(0,v.hg)("deleteSellerUserData",(async(e,l)=>{let{dispatch:a}=l;try{a((0,m.K4)(!0));const l=await(0,f.Z)().delete(`/users/seller/delete/${e.id}/${e.store_name}`);var t,s;if(null!==l&&void 0!==l&&l.data)e.callbackFunc(),a(Z({id:e.seller_id})),a((0,m.K4)(!1)),a((0,p.$h)(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message));else a((0,p.tK)((null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.message)||h.Z.ERROR.DEFAULT))}catch(n){var i,r;a((0,m.K4)(!1)),a((0,p.tK)((null===n||void 0===n||null===(i=n.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.message)||h.Z.ERROR.DEFAULT))}}));var g=a(20710),y=a(48420),j=a(50301),E=a(94469),K=a(33604),T=a(69625),F=a(19641),U=a(6961),S=a(98668),w=a(75627),L=a(48491),A=a(83247),C=a(68721),D=a(97741),k=a(20715),$=a(47992),O=a(57204),q=a(46417);var P=e=>{const{label:l,control:a,rules:t,name:s,errors:i,helperText:r,options:n}=e;return(0,q.jsx)(w.Qr,{name:s,control:a,rules:t,render:e=>{let{field:a}=e;return(0,q.jsxs)(O.Z,{sx:{minWidth:110},children:[(0,q.jsx)($.Z,{id:"demo-simple-select-autowidth-label",children:"User Type"}),(0,q.jsx)(C.Z,{label:l,value:a.value,onChange:a.onChange,error:i[s],helperText:i&&i[s]&&"required"===i[s].type?`Please select valid ${l}`:r,children:n.map((e=>(0,q.jsx)(D.Z,{value:e.value,children:e.label},e.value)))}),(0,q.jsx)(k.Z,{sx:{color:"red"},children:i&&i[s]&&"required"===i[s].type?`Please select valid ${l}`:r})]})}})},W=a(3463),N=a(62563);const G=t.forwardRef((function(e,l){return(0,q.jsx)(j.Z,{direction:"up",ref:l,...e})}));var I=e=>{var l,a,t,s,i;const{open:n,handleClose:d,updateSeller:o,sellerData:u}=e,c=(0,y.CG)((e=>e.dataLoading)),v=W.Ry().shape({first_name:W.Z_().required("First name is required").matches(/^[^\d]+$/,"Numbers are not allowed").trim(),last_name:W.Z_().required("Last name is required").matches(/^[^\d]+$/,"Numbers are not allowed").trim(),email:W.Z_().email("Must be a valid email").required("Email is required").trim(),phone:W.Z_().required("Please enter phone number"),user_type:W.Z_().required("Must select User type")}),{register:m,handleSubmit:p,control:h,formState:{errors:f}}=(0,w.cI)({defaultValues:u,mode:"onTouched",resolver:(0,N.X)(v)});return(0,q.jsxs)(E.Z,{open:n,TransitionComponent:G,keepMounted:!0,onClose:d,"aria-describedby":"alert-dialog-slide-description",children:[(0,q.jsxs)(K.Z,{children:[u.id?"Edit":"Add"," Seller's User information"]}),(0,q.jsxs)("form",{noValidate:!0,onSubmit:p((e=>{o(e)})),children:[(0,q.jsx)(T.Z,{children:(0,q.jsxs)(F.ZP,{container:!0,spacing:2,children:[(0,q.jsx)(F.ZP,{item:!0,sm:6,children:(0,q.jsx)(L.Z,{label:"First Name",type:"text",control:h,rules:{required:!0},name:"first_name",helperText:null===(l=f.first_name)||void 0===l?void 0:l.message,errors:f,fullWidth:!0,...m("first_name")})}),(0,q.jsx)(F.ZP,{item:!0,sm:6,children:(0,q.jsx)(L.Z,{label:"Last Name",control:h,rules:{required:!0},name:"last_name",helperText:null===(a=f.last_name)||void 0===a?void 0:a.message,errors:f,fullWidth:!0,...m("last_name")})}),(0,q.jsx)(F.ZP,{item:!0,sm:6,children:(0,q.jsx)(L.Z,{label:"Email",control:h,rules:{required:!0},disabled:!!u.id,helperText:null===(t=f.email)||void 0===t?void 0:t.message,name:"email",errors:f,fullWidth:!0,...m("email")})}),(0,q.jsx)(F.ZP,{item:!0,sm:6,children:(0,q.jsx)(A.Z,{type:"tel",label:"Phone no.",control:h,rules:{required:!0},disabled:!1,name:"phone",helperText:null===(s=f.phone)||void 0===s?void 0:s.message,errors:f,fullWidth:!0})}),(0,q.jsx)(F.ZP,{item:!0,sm:6,children:(0,q.jsx)(P,{label:"User Type",control:h,rules:{required:!0},name:"user_type",errors:f,helperText:null===(i=f.user_type)||void 0===i?void 0:i.message,options:[{value:2,label:"Admin"},{value:4,label:"User"}]})})]})}),(0,q.jsxs)(U.Z,{children:[(0,q.jsx)(r.Z,{onClick:d,children:"Cancel"}),(0,q.jsxs)(r.Z,{type:"submit",variant:"contained",disabled:c.loading,children:[c.loading&&(0,q.jsx)(S.Z,{sx:{color:"#0000001f",mr:"10px"},size:"15px"}),u.id?"Update":"Add"]})]})]})]})},M=a(4071),z=a(33497);var B=()=>{var e;const[l,a]=(0,t.useState)([]),[v,m]=(0,t.useState)(),[p,h]=(0,t.useState)([]),[f,x]=(0,t.useState)(!1),[j,E]=(0,t.useState)({}),[K,T]=(0,t.useState)(!1),[F,U]=(0,t.useState)({}),S=(0,y.TL)(),w=(0,y.CG)((e=>e.sellerUserSlice.list)),L=(0,y.CG)((e=>e.sellerSlice.list)),A=(0,y.CG)((e=>e.authorization)),C=null===A||void 0===A||null===(e=A.userData)||void 0===e?void 0:e.data;(0,t.useEffect)((()=>{S((0,g.$5)())}),[]),(0,t.useEffect)((()=>{1!==(null===C||void 0===C?void 0:C.user_type)&&m({id:C.seller_id||C.id,store_name:C.store_name})}),[C]),(0,t.useEffect)((()=>{L&&L.length>0?a(null===L||void 0===L?void 0:L.map((e=>e))):a([])}),[L]),(0,t.useEffect)((()=>{v&&null!==v&&void 0!==v&&v.id&&S(Z({id:v.id}))}),[v]),(0,t.useEffect)((()=>{w&&w.length>0?h(w.map((e=>[e.email,e.first_name,e.last_name,e.is_active,e.user_type,e]))):h([])}),[w]);const D=e=>{e.id?S(R({data:{first_name:e.first_name,last_name:e.last_name,email:e.email,is_active:e.is_active,phone:e.phone,user_type:parseInt(null===e||void 0===e?void 0:e.user_type),store_name:null===v||void 0===v?void 0:v.store_name,seller_id:null===v||void 0===v?void 0:v.id},seller_id:e.id,callbackFunc:k})):S(_({data:{first_name:e.first_name,last_name:e.last_name,email:e.email,is_active:e.is_active,phone:e.phone,user_type:null===e||void 0===e?void 0:e.user_type,store_name:null===v||void 0===v?void 0:v.store_name,seller_id:e.seller_id},callbackFunc:k}))},k=e=>{x(!f),E(e&&null!==e&&void 0!==e&&e.id?e:{store_name:null===v||void 0===v?void 0:v.store_name,seller_id:null===v||void 0===v?void 0:v.id})},$=e=>{T(!K),U(e||{})},O=[{name:"email",label:"Email",options:{filter:!0,sort:!0}},{name:"first_name",label:"First Name",options:{filter:!0,sort:!1}},{name:"last_name",label:"Last name",options:{filter:!0,sort:!1}},{name:"is_active",label:"Active",options:{filter:!0,sort:!1,customBodyRender:e=>(0,q.jsx)(s.Z,{checked:e})}},{name:"user_type",label:"Type",options:{filter:!0,sort:!1,customBodyRender:e=>2==e?"Admin":"User"}},{name:"actions",label:"Actions",options:{filter:!0,sort:!1,customBodyRender:e=>(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.Z,{onClick:()=>k(e),children:(0,q.jsx)(u.Z,{color:"primary"})}),(0,q.jsx)(i.Z,{onClick:()=>$(e),children:(0,q.jsx)(o.default,{color:"error"})})]})}}],P={filter:!1,viewColumns:!1,selectableRows:"none",print:!1,download:!1,customToolbar:()=>(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(r.Z,{onClick:k,disabled:!v,children:"Add New"}),1==(null===C||void 0===C?void 0:C.user_type)&&(0,q.jsx)(n.Z,{sx:{width:"200px",display:"inline-flex",marginRight:"-25px"},componentsProps:{paper:{sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}},getOptionLabel:e=>`${e.first_name} ${e.last_name}`,disablePortal:!0,value:v,id:"combo-box-demo",options:l,onChange:(e,l)=>((e,l)=>{if(m(l),null!==l&&void 0!==l&&l.id){let e={id:null===l||void 0===l?void 0:l.id};S(Z(e))}})(0,l),renderInput:e=>(0,q.jsx)(d.Z,{...e,label:"Choose Seller"})})]})};return(0,q.jsxs)(z.Z,{sx:{border:"none"},title:"User Management",children:[(0,q.jsx)(c.ZP,{actions:[{icon:"save"}],data:p,columns:O,options:P}),f&&(0,q.jsx)(I,{open:f,handleClose:k,updateSeller:D,sellerData:j}),K&&(0,q.jsx)(M.Z,{item:"user",cancelCallback:$,deleteCallback:()=>{null!==F&&void 0!==F&&F.id&&S(b({id:F.id,callbackFunc:$,seller_id:v.id,store_name:null===v||void 0===v?void 0:v.store_name}))},open:K,updateSeller:D})]})}}}]);