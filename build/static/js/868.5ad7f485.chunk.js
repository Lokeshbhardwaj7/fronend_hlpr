"use strict";(self.webpackChunkmetrics=self.webpackChunkmetrics||[]).push([[868],{53808:function(e,t,a){a.d(t,{RQ:function(){return m},jE:function(){return l},x9:function(){return c},xW:function(){return u}});var o=a(80827),d=a(3509),r=a(40789),s=a(61913),i=a(98189),n=a(5140);const l=(0,o.hg)("getProductKeywordsList",(async(e,t)=>{let{dispatch:a}=t;try{a((0,d.K4)(!0));const t=await(0,n.Z)().post("keywords/product-keywords",e);a((0,d.K4)(!1)),null!==t&&void 0!==t&&t.data?a((0,s.Gt)(null===t||void 0===t?void 0:t.data)):a((0,r.tK)(i.Z.ERROR.DEFAULT))}catch(o){a((0,d.K4)(!1)),a((0,r.tK)(i.Z.ERROR.DEFAULT))}})),c=(0,o.hg)("importKewords",(async(e,t)=>{let{dispatch:a}=t;try{a((0,d.K4)(!0));const t=await(0,n.Z)().post("/keywords/csv-upload",null===e||void 0===e?void 0:e.formData);if(a((0,d.K4)(!1)),null!==t&&void 0!==t&&t.data){a((0,r.$h)("Keywords Upload successfully")),a(l({store_id:[72],filter:{action:"sort",name:"product_id",direction:"desc"},status:"",limit:1e3,page:0,search:""}))}else a((0,r.tK)(i.Z.ERROR.DEFAULT))}catch(c){var o,s;a((0,d.K4)(!1)),a((0,r.tK)((null===c||void 0===c||null===(o=c.response)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.message)||i.Z.ERROR.DEFAULT))}})),u=(0,o.hg)("getSingleProductDetail",(async(e,t)=>{let{dispatch:a}=t;try{a((0,d.K4)(!0));const t=await(0,n.Z)().post("keywords/product-keywords",e);a((0,d.K4)(!1)),null!==t&&void 0!==t&&t.data?a((0,s.PY)(null===t||void 0===t?void 0:t.data)):a((0,r.tK)(i.Z.ERROR.DEFAULT))}catch(o){a((0,d.K4)(!1)),a((0,r.tK)(i.Z.ERROR.DEFAULT))}})),m=(0,o.hg)("getKeywordListByItemId",(async(e,t)=>{let{dispatch:a}=t;try{a((0,d.K4)(!0));const t=await(0,n.Z)().post("keywords/product-keywords-detail",e);a((0,d.K4)(!1)),null!==t&&void 0!==t&&t.data?a((0,s.DQ)(null===t||void 0===t?void 0:t.data)):a((0,r.tK)(i.Z.ERROR.DEFAULT))}catch(o){a((0,d.K4)(!1)),a((0,r.tK)(i.Z.ERROR.DEFAULT))}}))},4868:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var o=a(47313),d=a(33497),r=a(9506),s=a(47605),i=a(80836),n=a(8047),l=a(13827),c=a(57009),u=a(84511),m=a(48182),v=a(77421),h=a(24614),x=a(473),g=a(48420),p=a(53808),_=a(71003),j=a(49969),y=a(51997),k=a(51542),f=a(6805),w=a(5211),Z=a(49476),b=a(25551),C=a(46417);var S=e=>{const{itemId:t}=e,a=(0,g.CG)((e=>e.dataLoading)),r=(0,g.TL)(),{itemWiseKeywordList:n}=(0,g.CG)((e=>e.keyWordSlice)),[c]=(0,o.useState)([]),[u,m]=(0,o.useState)(0),[S]=(0,o.useState)([5,10,15,0]),[R,K]=(0,o.useState)(10),[z,N]=(0,o.useState)([{columnName:"keyword",direction:"asc"}]),[E,O]=(0,o.useState)(["keyword","total_search_results","trend","organic_rank","sponsored_rank","relative_organic_rank","average_organic_rank","ranked_products","sample_rate","actions"]),[T]=(0,o.useState)([{name:"keyword",title:"Keyword"},{name:"total_search_results",title:"Total Search Results"},{name:"trend",title:"Trend"},{name:"organic_rank",title:"Organic Rank"},{name:"sponsored_rank",title:"Sponsored Rank"},{name:"relative_organic_rank",title:"Relative Organic Rank"},{name:"average_organic_rank",title:"Average Organic Rank"},{name:"ranked_products",title:"Ranked Products"},{name:"sample_rate",title:"Sample Rate"},{name:"actions",title:"Actions"}]),[L]=(0,o.useState)(["keyword"]),[A,M]=(0,o.useState)([]),[D]=(0,o.useState)([{columnName:"keyword",width:200},{columnName:"total_search_results",width:180},{columnName:"trend",width:180},{columnName:"organic_rank",width:180},{columnName:"sponsored_rank",width:180},{columnName:"relative_organic_rank",width:180},{columnName:"average_organic_rank",width:180},{columnName:"ranked_products",width:180},{columnName:"sample_rate",width:180},{columnName:"actions",width:100}]);(0,o.useEffect)((()=>{let e={store_id:[72],filter:{action:"sort",name:"id",direction:"desc"},item_id:t,limit:10,page:0,search:""};r((0,p.RQ)(e))}),[]),(0,o.useEffect)((()=>{var e;const t=[];var a;null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e.length&&(null===n||void 0===n||null===(a=n.data)||void 0===a||a.map((e=>{var a,o,d;let r={keyword:(null===e||void 0===e?void 0:e.name)||"-",total_search_results:(null===e||void 0===e||null===(a=e.ktapp_totalkeywords[0])||void 0===a?void 0:a.total_items)||"-",trend:(null===e||void 0===e?void 0:e.trend)||"-",organic_rank:(null===e||void 0===e||null===(o=e.keyword_trackinfo[0])||void 0===o?void 0:o.organic_rank)||"0",sponsored_rank:(null===e||void 0===e||null===(d=e.keyword_trackinfo[0])||void 0===d?void 0:d.sponsored_rank)||"0",relative_organic_rank:(null===e||void 0===e?void 0:e.relative_organic_rank)||"-",average_organic_rank:(null===e||void 0===e?void 0:e.average_organic_rank)||"-",ranked_products:(null===e||void 0===e?void 0:e.ranked_products)||"-",sample_rate:(null===e||void 0===e?void 0:e.sample_rate)||"-",actions:(0,C.jsx)(i.Z,{size:"small",children:(0,C.jsx)(l.Z,{color:"primary"})})};t.push(r)})));M(t)}),[n]);const P=()=>{console.log("handleButtonClick:")},U=e=>{const{children:t}=e;return(0,C.jsxs)("div",{className:"keywords_table_header",children:[(0,C.jsxs)(_.Z,{size:"small",sx:{color:"white",width:"150px"},variant:"contained",color:"secondary",children:[(0,C.jsx)(b.Z,{fontSize:"small",sx:{mr:"5px"}})," Add Keywords"]}),(0,C.jsx)(_.Z,{size:"small",sx:{background:"beige",borderRadius:"10px",height:"40px",ml:1,mr:1},children:t}),(0,C.jsx)(_.Z,{size:"small",sx:{background:"beige",borderRadius:"10px",height:"40px",ml:1,mr:1},children:(0,C.jsx)(j.Z,{defaultChecked:!0,size:"small"})}),(0,C.jsx)(_.Z,{sx:{background:"beige",borderRadius:"10px",height:"40px",ml:1,mr:1},children:(0,C.jsx)(y.default,{color:"error"})}),(0,C.jsx)(_.Z,{sx:{background:"beige",borderRadius:"10px",height:"40px",ml:1,mr:1},children:(0,C.jsx)(k.Z,{sx:{color:"grey"}})}),(0,C.jsxs)(_.Z,{sx:{background:"beige",borderRadius:"10px",height:"40px",ml:1,mr:1},children:[(0,C.jsx)(w.Z,{sx:{color:"grey"}})," ",(0,C.jsx)(f.Z,{sx:{color:"grey"}})]}),(0,C.jsxs)(_.Z,{sx:{background:"beige",borderRadius:"10px",height:"40px",ml:1,mr:1},children:[(0,C.jsx)(Z.default,{sx:{color:"grey"}})," ",(0,C.jsx)(f.Z,{sx:{color:"grey"}})]})]})};return(0,C.jsxs)(C.Fragment,{children:[(null===a||void 0===a?void 0:a.loading)&&(0,C.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999},children:(0,C.jsx)(x.Z,{})}),(0,C.jsx)(d.Z,{sx:{mt:"10px"},title:(0,C.jsxs)(C.Fragment,{children:["Keywords",(0,C.jsx)(s.Z,{variant:"subtitle2",children:"Note: Newly added keywords will be updated within 24 hour."})]}),children:(0,C.jsxs)(h.rj,{rows:A,columns:T,children:[(0,C.jsx)(h.o8,{rootComponent:e=>(0,C.jsx)(U,{...e,onCustomBtnClick:P})}),(0,C.jsx)(v.fP,{}),(0,C.jsx)(v.xO,{}),(0,C.jsx)(v.Eb,{}),(0,C.jsx)(v.MD,{currentPage:u,onCurrentPageChange:m,pageSize:R,onPageSizeChange:K}),(0,C.jsx)(v.qC,{}),(0,C.jsx)(h.cO,{}),(0,C.jsx)(h.W3,{defaultHiddenColumnNames:c}),(0,C.jsx)(h.kU,{}),(0,C.jsx)(h.wz,{}),(0,C.jsx)(h.nM,{order:E,onOrderChange:O}),(0,C.jsx)(v.tU,{sorting:z,onSortingChange:N}),(0,C.jsx)(v.qf,{}),(0,C.jsx)(h.ad,{defaultColumnWidths:D}),(0,C.jsx)(h.KA,{showSortingControls:!0}),(0,C.jsx)(h.vN,{selectByRowClick:!0}),(0,C.jsx)(h.a$,{leftColumns:L}),(0,C.jsx)(h.U6,{pageSizes:S})]})})]})},R=a(97890);const K=(0,u.D)();var z=()=>{const{state:e}=(0,R.TH)(),{id:t}=e,a=(0,g.CG)((e=>e.dataLoading)),u=(0,g.TL)(),{singleItemKeyWordList:_}=(0,g.CG)((e=>e.keyWordSlice)),[j]=(0,o.useState)([]),[y,k]=(0,o.useState)([]),[f,w]=(0,o.useState)([]),[Z,b]=(0,o.useState)([]),[z,N]=(0,o.useState)(0),[E,O]=(0,o.useState)(10),[T,L]=(0,o.useState)([{columnName:"product_name",direction:"asc"}]),[A,M]=(0,o.useState)(["product_name","keywords","tracked_keywords","credits_used","competitors","keywords_summary","actions"]),[D]=(0,o.useState)(["product_name"]),[P]=(0,o.useState)([{name:"product_name",title:"Product Name"},{name:"keywords",title:"Keywords"},{name:"tracked_keywords",title:"Tracked Keywords"},{name:"credits_used",title:"Credits Used"},{name:"competitors",title:"Competitors"},{name:"keywords_summary",title:"Keywords Summary"},{name:"actions",title:"Actions"}]),[U]=(0,o.useState)([{columnName:"product_name",width:200},{columnName:"keywords",width:100},{columnName:"tracked_keywords",width:100},{columnName:"credits_used",width:100},{columnName:"competitors",width:240},{columnName:"keywords_summary",width:240},{columnName:"actions",width:100}]),H=[{id:115,name:"Microsoft",color:"#e8d8f8",product_tags:[{id:2904,product_id:165,tag_id:115,created_at:"2024-01-11T06:12:54.076Z",updated_at:"2024-01-11T06:12:54.076Z",is_deleted:!1}]},{id:114,name:"-bbb",color:"#f0f8d8",product_tags:[]},{id:113,name:"Testingone",color:"#d0c8f0",product_tags:[]},{id:112,name:"Testing one:bvk2",color:"#c8d0c8",product_tags:[{id:2817,product_id:208,tag_id:112,created_at:"2024-01-10T04:46:26.373Z",updated_at:"2024-01-10T04:46:26.373Z",is_deleted:!1}]},{id:111,name:"Testing one:bvk1",color:"#c8f0d0",product_tags:[{id:2816,product_id:208,tag_id:111,created_at:"2024-01-10T04:46:26.373Z",updated_at:"2024-01-10T04:46:26.373Z",is_deleted:!1}]}];(0,o.useEffect)((()=>{if(H&&(null===H||void 0===H?void 0:H.length)>0){const e=[];null===H||void 0===H||H.map((t=>{let a={tag_id:null===t||void 0===t?void 0:t.id,tag_name:null===t||void 0===t?void 0:t.name};e.push(a)})),b(e)}else b([])}),[]),(0,o.useEffect)((()=>{let e={store_id:[72],filter:{action:"sort",name:"product_id",direction:"desc"},status:"",item_id:t,limit:1e3,page:0,search:""};u((0,p.xW)(e))}),[]),(0,o.useEffect)((()=>{var e;const t=[];var a;null!==_&&void 0!==_&&null!==(e=_.data)&&void 0!==e&&e.length&&(null===_||void 0===_||null===(a=_.data)||void 0===a||a.map((e=>{var a;const o=e&&(null===e||void 0===e?void 0:e.product_url);let d={product_name:(0,C.jsxs)(r.Z,{sx:{display:"flex"},children:[(0,C.jsx)(r.Z,{sx:{mr:"5px"},children:(0,C.jsx)("button",{style:{padding:"0"},className:"custom-cell",tabIndex:0,children:(0,C.jsx)("img",{src:(null===e||void 0===e?void 0:e.primary_image_url)||(null===e||void 0===e?void 0:e.image),alt:"Product",style:{border:"1px solid rgba(224, 224, 224, 1)",maxWidth:"35px",maxHeight:"40px",width:"35px",height:"38px"}})})}),(0,C.jsx)(r.Z,{children:(0,C.jsxs)("div",{className:"custom-cell",children:[(0,C.jsxs)("a",{href:o,style:{display:"flex",alignItems:"center"},children:[(0,C.jsx)(s.Z,{style:{fontSize:"0.75rem"},children:null===e||void 0===e?void 0:e.product_name}),(0,C.jsx)(c.Z,{fontSize:"small"})]}),(0,C.jsxs)(r.Z,{sx:{display:"flex"},children:[(0,C.jsxs)(s.Z,{style:{fontSize:"0.75rem"},variant:"body2",children:["ITEM ID: ",null===e||void 0===e?void 0:e.item_id," ||\xa0"]}),(0,C.jsxs)(s.Z,{style:{fontSize:"0.75rem"},variant:"body2",children:["SKU: ",null===e||void 0===e?void 0:e.sku]})]})]})})]}),keywords:(null===e||void 0===e||null===(a=e.keywords)||void 0===a?void 0:a.length)||0,tracked_keywords:"-",credits_used:"-",competitors:"-",keywords_summary:"-",actions:(0,C.jsx)(i.Z,{size:"small",children:(0,C.jsx)(l.Z,{color:"primary"})})};t.push(d)})));w(t)}),[_]);const I=()=>(0,C.jsxs)("div",{className:"select_table_header",children:[(0,C.jsx)(s.Z,{sx:{mr:"5px"},variant:"h5",children:"Keyword Tags"}),(0,C.jsx)(m.Z,{sx:{width:"140px"},value:y,defaultValue:y,multiple:!0,onChange:(e,t)=>{"string"===typeof t?k({tag_name:t}):t&&t.inputValue?k({tag_name:t.inputValue}):k(t)},filterOptions:(e,t)=>{let a=K(e,t);null===y||void 0===y||y.map((e=>{var t;a=null===(t=a)||void 0===t?void 0:t.filter((t=>t.tag_id!==e.tag_id))}));const{inputValue:o}=t,d=e.some((e=>{var t;return(null===o||void 0===o?void 0:o.toLocaleLowerCase())===(null===(t=e.tag_name)||void 0===t?void 0:t.toLocaleLowerCase())}));return""===o||d||a.push({inputValue:o,tag_name:`Create "${o}"`}),a},selectOnFocus:!0,filterSelectedOptions:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"Select or create tags",options:Z,getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e.tag_name,renderOption:(e,t)=>(0,C.jsx)("li",{...e,children:t.tag_name}),freeSolo:!0,renderInput:e=>(0,C.jsx)(n.Z,{...e,label:"All Keyword Tags",variant:"outlined"})})]});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.Z,{title:"Monitored Keywords",children:(0,C.jsxs)(h.rj,{rows:f,columns:P,children:[(null===a||void 0===a?void 0:a.loading)&&(0,C.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999},children:(0,C.jsx)(x.Z,{})}),(0,C.jsx)(h.o8,{rootComponent:()=>(0,C.jsx)(I,{})}),(0,C.jsx)(v.Eb,{}),(0,C.jsx)(v.MD,{currentPage:z,onCurrentPageChange:N,pageSize:E,onPageSizeChange:O}),(0,C.jsx)(v.qC,{}),(0,C.jsx)(h.cO,{}),(0,C.jsx)(h.W3,{defaultHiddenColumnNames:j}),(0,C.jsx)(h.wz,{}),(0,C.jsx)(h.nM,{order:A,onOrderChange:M}),(0,C.jsx)(v.tU,{sorting:T,onSortingChange:L}),(0,C.jsx)(v.qf,{}),(0,C.jsx)(h.ad,{defaultColumnWidths:U}),(0,C.jsx)(h.KA,{showSortingControls:!0}),(0,C.jsx)(h.a$,{leftColumns:D})]})}),(0,C.jsx)(S,{itemId:t})]})}},5211:function(e,t,a){var o=a(64836);t.Z=void 0;var d=o(a(45045)),r=a(46417),s=(0,d.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=s},25551:function(e,t,a){var o=a(64836);t.Z=void 0;var d=o(a(45045)),r=a(46417),s=(0,d.default)((0,r.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutline");t.Z=s},51997:function(e,t,a){var o=a(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=o(a(45045)),r=a(46417),s=(0,d.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=s},51542:function(e,t,a){var o=a(64836);t.Z=void 0;var d=o(a(45045)),r=a(46417),s=(0,d.default)((0,r.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7.53 12L9 10.5l1.4-1.41 2.07 2.08L17.6 6 19 7.41 12.47 14zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z"}),"LibraryAddCheck");t.Z=s},6805:function(e,t,a){var o=a(64836);t.Z=void 0;var d=o(a(45045)),r=a(46417),s=(0,d.default)((0,r.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"}),"LocalOffer");t.Z=s},49476:function(e,t,a){var o=a(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=o(a(45045)),r=a(46417),s=(0,d.default)((0,r.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove");t.default=s}}]);