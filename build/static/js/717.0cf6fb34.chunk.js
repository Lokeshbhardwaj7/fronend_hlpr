"use strict";(self.webpackChunkmetrics=self.webpackChunkmetrics||[]).push([[717],{34717:function(e,l,i){i.r(l);var t=i(47313),o=i(7794),d=i(47605),a=i(69173),n=i(67426),s=i(80836),r=i(19641),c=i(8047),v=i(71003),u=i(98668),m=i(15743),h=i(57009),g=i(14647),p=i(473),x=i(97890),f=i(33497),j=i(48420),b=i(6165),y=i(40789),S=i(46417);l.default=()=>{const{state:e}=(0,x.TH)(),l=(0,x.s0)(),[i,Z]=(0,t.useState)([]),[C,_]=(0,t.useState)(),[k,w]=(0,t.useState)(!1),[I,P]=(0,t.useState)(!0),[T,O]=(0,t.useState)(""),[N,A]=(0,t.useState)(!0),[z,H]=(0,t.useState)([]),E=(0,j.CG)((e=>e.sellerItemSlice.list)),L=(0,j.TL)(),V=(0,j.CG)((e=>e.dataLoading)),D=(0,j.CG)((e=>e.dashboardSlice.storeId)),B=JSON.parse(localStorage.getItem("sortActions_cogs")),J=(0,j.CG)((e=>e.dashboardSlice.tagId));(0,t.useEffect)((()=>{Array.isArray(D)&&0===D.length||w(!0)}),[D]),(0,t.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("user_data"));if(k){var l,i,t;let o={store_id:D||(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.store_id),filter:{action:(null===B||void 0===B?void 0:B.action)||"sort",name:(null===B||void 0===B||null===(i=B.sortOrder)||void 0===i?void 0:i.name)||"id",direction:(null===B||void 0===B||null===(t=B.sortOrder)||void 0===t?void 0:t.direction)||"desc"},lifecycle_status:I?"ACTIVE":"INACTIVE",limit:(null===C||void 0===C?void 0:C.limit)||10,page:(null===C||void 0===C?void 0:C.page)||0,search:(null===C||void 0===C?void 0:C.search)||"",ids:N?0===(null===J||void 0===J?void 0:J.length)?[0]:J:[]};L((0,b.sg)(o))}}),[D,C,k,I,N]),(0,t.useEffect)((()=>{null!==E&&void 0!==E&&E.data&&E.data.length>0?Z(E.data.map((e=>[e]))):Z([])}),[E]),(0,t.useEffect)((()=>{if(null!==e&&void 0!==e&&e.tagData){var i;const l=null===e||void 0===e?void 0:e.tagData;if(O(null===l||void 0===l?void 0:l.name),null!==l&&void 0!==l&&null!==(i=l.product_tags)&&void 0!==i&&i.length){const e=null===l||void 0===l?void 0:l.product_tags.map((e=>e.product_id));H(e)}}else l("/pnl-tags")}),[e]);const R=e=>{P(e.target.checked)},G=[{name:"product_name",label:"Product",options:{sort:!0,filter:!0,customBodyRender:e=>(0,S.jsxs)(m.Z,{sx:{display:"flex"},children:[(0,S.jsx)(m.Z,{sx:{mr:"5px"},children:(0,S.jsx)("button",{style:{padding:"0"},className:"custom-cell",onClick:()=>openNewTabAddCredi(null===e||void 0===e?void 0:e.product_url),onKeyDown:l=>{"Enter"!==l.key&&"Space"!==l.key||openNewTabAddCredi(null===e||void 0===e?void 0:e.product_url)},tabIndex:0,children:(0,S.jsx)("img",{src:(null===e||void 0===e?void 0:e.primary_image_url)||(null===e||void 0===e?void 0:e.image),alt:"Product",style:{border:"1px solid rgba(224, 224, 224, 1)",maxWidth:"35px",maxHeight:"40px",width:"35px",height:"38px"}})})}),(0,S.jsx)(m.Z,{children:(0,S.jsxs)("div",{className:"custom-cell",children:[(0,S.jsxs)("a",{href:null===e||void 0===e?void 0:e.item_page_url,onClick:l=>handleLinkClick(l,null===e||void 0===e?void 0:e.item_page_url),style:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(d.Z,{style:{fontSize:"0.75rem"},children:null===e||void 0===e?void 0:e.product_name}),(0,S.jsx)(h.Z,{fontSize:"small"})]}),(0,S.jsxs)(m.Z,{sx:{display:"flex"},children:[(0,S.jsxs)(d.Z,{style:{fontSize:"0.75rem"},variant:"body2",children:["ITEM ID: ",null===e||void 0===e?void 0:e.item_id," ||\xa0"]}),(0,S.jsxs)(d.Z,{style:{fontSize:"0.75rem"},variant:"body2",children:["SKU: ",null===e||void 0===e?void 0:e.sku]})]})]})})]})}}],M={filterType:"checkbox",selectableRows:!N,tableBodyHeight:"calc(100vh - 344px)",print:!1,download:!1,filter:!1,count:null===E||void 0===E?void 0:E.count,serverSide:!0,selectToolbarPlacement:"none",rowHover:!0,rowsPerPageOptions:[10,20,30],onTableChange:(e,l)=>{if("search"===e||"sort"===e||"changeRowsPerPage"==e||"changePage"==e){var i,t,o;let d={action:e,page:null===l||void 0===l?void 0:l.page,search:null!==(i=null===l||void 0===l?void 0:l.searchText)&&void 0!==i?i:"",limit:null===l||void 0===l?void 0:l.rowsPerPage,name:void 0!==(null===l||void 0===l||null===(t=l.sortOrder)||void 0===t?void 0:t.name)?l.sortOrder.name:"",direction:void 0!==(null===l||void 0===l||null===(o=l.sortOrder)||void 0===o?void 0:o.direction)?null===l||void 0===l?void 0:l.sortOrder.direction.toUpperCase():""};_(d),localStorage.setItem("sortActions_cogs",JSON.stringify(d))}},customToolbarSelect:()=>null,customToolbar:()=>(0,S.jsx)(a.Z,{sx:{mr:1},control:(0,S.jsx)(n.Z,{checked:I,onChange:R,name:"mySwitch",color:"primary"}),label:"Active",labelPlacement:"start"}),onRowClick:(e,l)=>{var i;let t=JSON.parse(JSON.stringify(z)),o=null===E||void 0===E||null===(i=E.data[null===l||void 0===l?void 0:l.rowIndex])||void 0===i?void 0:i.id;const d=t.indexOf(o);-1===d?t.push(o):t.splice(d,1),H(t)},onRowSelectionChange:(e,l,i)=>{const t=i.map((e=>{var l,i;return null===E||void 0===E||null===(l=E.data)||void 0===l||null===(i=l[e])||void 0===i?void 0:i.id}));return H(t),null}};if(null!==z&&void 0!==z&&z.length){const e=[];z.map((l=>{var i;const t=null===E||void 0===E||null===(i=E.data)||void 0===i?void 0:i.findIndex((e=>e.id===l));e.push(t)})),null!==e&&void 0!==e&&e.length&&Object.assign(M,{rowsSelected:e})}else Object.assign(M,{rowsSelected:[]});const U=()=>{l("/pnl-tags")};return(0,S.jsxs)(S.Fragment,{children:[(null===V||void 0===V?void 0:V.loading)&&(0,S.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999},children:(0,S.jsx)(p.Z,{})}),(0,S.jsxs)(f.Z,{title:(0,S.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(s.Z,{onClick:()=>U(),children:(0,S.jsx)(g.Z,{})}),"Update Tag"]}),className:"create-table-wrapper",children:[(0,S.jsxs)(r.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:[(0,S.jsx)(r.ZP,{item:!0,xs:6,children:(0,S.jsx)(c.Z,{label:"Tag name",name:"name",fullWidth:!0,value:T,onChange:e=>{(e=>{O(e.target.value)})(e)}})}),(0,S.jsxs)(r.ZP,{item:!0,xs:6,children:[(0,S.jsxs)(v.Z,{sx:{ml:2},variant:"contained",disabled:V.loading||!T,onClick:()=>(()=>{var l,i,t,o;null!==T&&void 0!==T&&T.trim()?null!==e&&void 0!==e&&null!==(l=e.tagData)&&void 0!==l&&l.id&&L((0,b.Hg)({data:{name:null===T||void 0===T?void 0:T.trim(),product_id:z},store_id:D||(null===(i=storedValue)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.store_id),id:null===e||void 0===e||null===(o=e.tagData)||void 0===o?void 0:o.id,handleBack:U})):L((0,y.tK)("Blank tag name not allowed."))})(),children:[V.loading&&(0,S.jsx)(u.Z,{sx:{color:"#0000001f",mr:"10px"},size:"15px"}),"Update Tag"]}),N&&(0,S.jsx)(v.Z,{sx:{ml:2},onClick:()=>{A(!N)},variant:"outlined",children:"Add Product"})]})]}),N&&(0,S.jsx)(o.ZP,{className:"pnl-by-item create-table",actions:[{icon:"save"}],data:i,columns:G,options:M}),!N&&(0,S.jsx)(o.ZP,{className:"pnl-by-item create-table",actions:[{icon:"save"}],data:i,columns:G,options:M})]})]})}},14647:function(e,l,i){var t=i(64836);l.Z=void 0;var o=t(i(45045)),d=i(46417),a=(0,o.default)((0,d.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");l.Z=a},57009:function(e,l,i){var t=i(64836);l.Z=void 0;var o=t(i(45045)),d=i(46417),a=(0,o.default)((0,d.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"Launch");l.Z=a}}]);